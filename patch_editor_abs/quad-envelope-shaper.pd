#N canvas 0 56 1366 679 10;
#X declare -lib moonlib;
#X obj 101 103 cnv 15 428 314 empty empty QUAD-ENVELOPE-SHAPER_3104
10 35 0 15 -233017 -66577 0;
#X obj 1052 28 inlet~ A;
#X obj 1188 27 inlet~ B;
#X obj 1363 29 inlet~ one;
#X obj 1500 29 inlet~ two;
#X obj 1637 29 inlet~ three;
#X obj 1772 29 inlet~ four;
#X text 116 102 A;
#X text 183 102 B;
#X text 268 101 1;
#X text 351 101 2;
#X text 436 101 3;
#X text 517 101 4;
#X obj 695 1019 outlet~ A;
#X obj 1937 1021 outlet~ one;
#X obj 193 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-1-s \$0-adsr-attack-1-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 176 5 0 0 0 - - -;
#X obj 193 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-1-s \$0-adsr-hold-1-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 219 5 0 0 0 - - -;
#X obj 193 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-1-s \$0-adsr-release-1-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 262 5 0 0 0 - - -;
#X obj 193 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-1-s \$0-adsr-time-1-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 305 5 0 0 0 - - -;
#X text 116 400 A;
#X text 183 400 B;
#X text 268 399 1;
#X text 352 399 2;
#X text 437 399 3;
#X text 517 399 4;
#X text 404 82 Knob size: 22;
#X obj 193 346 mknob 22 100 0 1 0 1 \$0-adsr-level-1-s \$0-adsr-level-1-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 193 369 5 0 0 0 - - -;
#X obj 279 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-2-s \$0-adsr-attack-2-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 176 5 0 0 0 - - -;
#X obj 279 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-2-s \$0-adsr-hold-2-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 219 5 0 0 0 - - -;
#X obj 279 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-2-s \$0-adsr-release-2-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 262 5 0 0 0 - - -;
#X obj 279 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-2-s \$0-adsr-time-2-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 305 5 0 0 0 - - -;
#X obj 279 346 mknob 22 100 0 1 0 1 \$0-adsr-level-2-s \$0-adsr-level-2-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 279 369 5 0 0 0 - - -;
#X obj 368 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-3-s \$0-adsr-attack-3-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 176 5 0 0 0 - - -;
#X obj 368 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-3-s \$0-adsr-hold-3-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 219 5 0 0 0 - - -;
#X obj 368 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-3-s \$0-adsr-release-3-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 262 5 0 0 0 - - -;
#X obj 368 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-3-s \$0-adsr-time-3-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 305 5 0 0 0 - - -;
#X obj 368 346 mknob 22 100 0 1 0 1 \$0-adsr-level-3-s \$0-adsr-level-3-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 368 369 5 0 0 0 - - -;
#X obj 457 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-4-s \$0-adsr-attack-4-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 176 5 0 0 0 - - -;
#X obj 457 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-4-s \$0-adsr-hold-4-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 219 5 0 0 0 - - -;
#X obj 457 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-4-s \$0-adsr-release-4-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 262 5 0 0 0 - - -;
#X obj 457 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-4-s \$0-adsr-time-4-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 305 5 0 0 0 - - -;
#X obj 457 346 mknob 22 100 0 1 0 1 \$0-adsr-level-4-s \$0-adsr-level-4-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 457 369 5 0 0 0 - - -;
#X obj 1953 747 vline~;
#X floatatom 2080 251 5 0 0 0 - - -;
#X floatatom 2087 323 5 0 0 0 - - -;
#X floatatom 2127 392 5 0 0 0 - - -;
#X obj 2013 374 r \$0-adsr-release-1-s;
#X obj 1993 305 r \$0-adsr-hold-1-s;
#X obj 1973 233 r \$0-adsr-attack-1-s;
#X obj 1937 891 *~;
#X floatatom 2048 184 5 0 0 0 - - -;
#X obj 1955 166 r \$0-adsr-time-1-s;
#X obj 1828 553 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 240 436 crossfader;
#X obj 1779 535 metro 1000;
#X obj 2034 624 +;
#X obj 2084 797 r \$0-adsr-level-1-s;
#X obj 2084 823 *~ -1;
#X obj 2084 849 +~ 1;
#X text 246 421 OFF-LEVEL;
#X obj 224 203 tgl 10 0 \$0-adsr-htoggle-1-s \$0-adsr-htoggle-1-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 224 288 tgl 10 0 \$0-adsr-ttoggle-1-s \$0-adsr-ttoggle-1-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 1973 258 * 1000;
#X obj 2013 399 * 1000;
#X obj 1993 330 * 1000;
#X text 2071 215 attack;
#X text 2091 287 hold;
#X text 2111 356 release;
#X obj 1955 190 * 1000;
#X obj 1780 486 spigot;
#X obj 1835 486 r \$0-adsr-ttoggle-1-s;
#X obj 1835 510 == 0;
#X text 1868 510 invert toggle;
#X obj 1778 683 r \$0-adsr-trigger-1-s;
#X text 102 451 0 - enveloped signal goes through;
#X text 126 466 1 - whole signal goes through;
#X text 2061 624 add time of attack and hold;
#X obj 1937 918 *~;
#X obj 1815 955 *~;
#X obj 1953 701 pack f f f f f;
#X msg 1953 725 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 2058 701 first f only for bang purposes;
#X obj 309 202 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 310 288 tgl 10 0 \$0-adsr-ttoggle-2-s \$0-adsr-ttoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 397 202 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 398 288 tgl 10 0 \$0-adsr-ttoggle-3-s \$0-adsr-ttoggle-3-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 489 203 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 490 289 tgl 10 0 \$0-adsr-ttoggle-4-s \$0-adsr-ttoggle-4-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X text 1813 811 receive signal from ch1;
#X text 1994 122 CHANNEL 1;
#X text 2025 149 off time;
#X obj 12 10 declare -lib moonlib;
#X obj 179 346 tgl 10 0 \$0-adsr-ttroggle-1-s \$0-adsr-ttroggle-1-r
trig/track -38 17 0 8 -262144 -1 -1 0 1;
#X obj 265 346 tgl 10 0 \$0-adsr-ttroggle-2-s \$0-adsr-ttroggle-2-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X obj 354 346 tgl 10 0 \$0-adsr-ttroggle-3-s \$0-adsr-ttroggle-3-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X obj 442 346 tgl 10 0 \$0-adsr-ttroggle-4-s \$0-adsr-ttroggle-4-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X text 2097 781 crossfade (OFF-LEVEL);
#X obj 1955 283 +;
#X obj 1955 361 +;
#X obj 1955 437 +;
#X text 1773 259 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 222 356 tgl 12 0 \$0-adsr-trigger-1-s \$0-adsr-trigger-1-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 1778 706 sel 1 0;
#X obj 2084 875 *~ 1;
#X msg 1811 731 0 1;
#X msg 1778 731 1 0;
#X obj 1778 757 unpack f f;
#X obj 711 202 sel 0 1 2;
#X obj 711 179 r \$0-atoggle-s;
#X obj 696 455 *~;
#X obj 730 455 *~;
#X text 574 839 just passing through;
#X text 114 480 off (0) - track | on (1) - trig;
#X obj 1877 551 r \$0-trbang-ch1;
#X obj 730 295 r~ \$0-bus-A;
#X text 1811 574 asdr ON/OFF;
#X obj 805 423 r \$0-adsr-ttroggle-1-s;
#X obj 762 493 sel 0 1;
#X obj 731 598 *~;
#X obj 760 598 *~;
#X obj 760 683 s \$0-trbang-ch1;
#X text 844 227 controls;
#X text 738 105 BUS A;
#X obj 489 469 r \$0-atoggle-s;
#X obj 489 492 != 0;
#X obj 489 538 s \$0-tick;
#X obj 489 515 metro 100;
#X text 1743 459 time toggle ctrl;
#X text 1776 667 external trigger;
#X text 1757 732 on;
#X text 1840 731 off;
#X text 1901 535 bang from A;
#X obj 109 178 vradio 12 1 0 3 \$0-atoggle-s \$0-atoggle-r empty 0
-8 0 10 -262144 -1 -1 1;
#X obj 110 305 vradio 12 1 0 3 \$0-btoggle-s \$0-btoggle-r empty 0
-8 0 10 -262144 -1 -1 0;
#X obj 780 365 s \$0-ctrl-sig-A;
#X obj 762 455 spigot;
#X text 814 452 ignore trig/track toggle in mode 0, f 17;
#X text 813 487 0: track mode 1: trig mode, f 14;
#X text 764 122 ch 1 & 3;
#X text 488 450 startup;
#X text 750 277 control signal from A;
#X text 125 176 A - 12, f 2;
#X text 126 302 B - 34, f 2;
#X text 790 598 detect trigger;
#X obj 760 621 threshold~ 0.5 5000 0 0;
#X msg 711 228 1 0 1;
#X msg 754 228 1 1 0;
#X msg 800 228 0 1 0;
#X text 880 365 adsr ON/OFF;
#X obj 711 339 unpack f f f;
#X obj 887 639 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1779 629 spigot;
#X obj 1763 630 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1812 590 r \$0-ctrl-sig-A;
#X msg 808 520 0 1;
#X msg 762 520 1 0;
#X obj 762 546 unpack f f;
#X floatatom 1885 906 5 0 0 0 - - -;
#X text 793 667 send bang to adsr;
#X obj 1812 611 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 732 792 *~;
#X text 95 952 manual trig should just play release;
#X text 95 979 tracking not smooth. Using env~ makes it stuck at a
level of 0.7, f 36;
#X obj 591 394 *~;
#X text 107 1018 control signal has trigger overlap;
#X text 53 845 toggle ext. signal to A and then trig/track and then
and then to - or 12 does not change trig/track. You have to manually
set trig/track AGAIN., f 43;
#X text 148 812 BUGS TO FIX, f 12;
#X obj 308 356 tgl 12 0 \$0-adsr-trigger-2-s \$0-adsr-trigger-2-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 397 356 tgl 12 0 \$0-adsr-trigger-3-s \$0-adsr-trigger-3-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 485 356 tgl 12 0 \$0-adsr-trigger-4-s \$0-adsr-trigger-4-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 948 454 spigot;
#X obj 948 494 sel 0 1;
#X msg 994 521 0 1;
#X msg 948 521 1 0;
#X obj 948 547 unpack f f;
#X obj 946 598 *~;
#X obj 975 598 *~;
#X obj 975 683 s \$0-trbang-ch2;
#X obj 975 621 threshold~ 0.5 5000 0 0;
#X obj 1102 639 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 1008 666 send bang to adsr;
#X obj 946 792 *~;
#X obj 733 966 s \$0-env-ch1a;
#X obj 948 423 r \$0-adsr-ttroggle-2-s;
#X text 173 658 TO DO, f 7;
#X text 53 686 Create subpatches and clean the patch, f 43;
#X text 53 703 Create help-file, f 43;
#X text 53 720 Implement hold-inf toggle, f 43;
#X obj 1235 200 sel 0 1 2;
#X obj 1220 453 *~;
#X obj 1254 453 *~;
#X text 1098 837 just passing through;
#X obj 1286 491 sel 0 1;
#X obj 1255 596 *~;
#X obj 1284 596 *~;
#X text 1368 225 controls;
#X obj 1286 453 spigot;
#X text 1338 450 ignore trig/track toggle in mode 0, f 17;
#X text 1337 485 0: track mode 1: trig mode, f 14;
#X text 1314 596 detect trigger;
#X obj 1284 619 threshold~ 0.5 5000 0 0;
#X msg 1235 226 1 0 1;
#X msg 1278 226 1 1 0;
#X msg 1324 226 0 1 0;
#X text 1404 363 adsr ON/OFF;
#X obj 1235 337 unpack f f f;
#X floatatom 1295 885 5 0 0 0 - - -;
#X obj 1257 867 snapshot~;
#X obj 1285 843 r \$0-tick;
#X obj 1411 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1332 518 0 1;
#X msg 1286 518 1 0;
#X obj 1286 544 unpack f f;
#X text 1335 868 this causes jumps and is NOT smooth, f 12;
#X text 1317 665 send bang to adsr;
#X obj 1256 790 *~;
#X obj 1256 813 sqrt~;
#X obj 1257 909 pack 0 10;
#X obj 1257 938 line;
#X obj 1116 390 *~;
#X obj 1472 452 spigot;
#X obj 1472 492 sel 0 1;
#X msg 1518 519 0 1;
#X msg 1472 519 1 0;
#X obj 1472 545 unpack f f;
#X obj 1470 596 *~;
#X obj 1499 596 *~;
#X obj 1499 619 threshold~ 0.5 5000 0 0;
#X obj 1626 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 1532 664 send bang to adsr;
#X floatatom 1509 885 5 0 0 0 - - -;
#X obj 1471 867 snapshot~;
#X obj 1499 843 r \$0-tick;
#X text 1549 868 this causes jumps and is NOT smooth, f 12;
#X obj 1470 790 *~;
#X obj 1470 813 sqrt~;
#X obj 1471 909 pack 0 10;
#X obj 1471 938 line;
#X text 1262 103 BUS B;
#X text 1290 118 ch 2 & 4;
#X obj 1235 177 r \$0-btoggle-s;
#X text 1274 275 control signal from B;
#X obj 1254 293 r~ \$0-bus-B;
#X obj 1304 363 s \$0-ctrl-sig-B;
#X obj 1329 421 r \$0-adsr-ttroggle-3-s;
#X obj 1472 421 r \$0-adsr-ttroggle-4-s;
#X obj 1284 681 s \$0-trbang-ch3;
#X obj 1499 681 s \$0-trbang-ch4;
#X obj 1257 964 s \$0-env-ch3b;
#X obj 1471 964 s \$0-env-ch3b;
#X obj 1219 1017 outlet~ B;
#X obj 2521 741 vline~;
#X floatatom 2648 245 5 0 0 0 - - -;
#X floatatom 2655 317 5 0 0 0 - - -;
#X floatatom 2695 386 5 0 0 0 - - -;
#X obj 2505 885 *~;
#X floatatom 2616 178 5 0 0 0 - - -;
#X obj 2396 547 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2347 529 metro 1000;
#X obj 2602 618 +;
#X obj 2652 817 *~ -1;
#X obj 2652 843 +~ 1;
#X obj 2541 252 * 1000;
#X obj 2581 393 * 1000;
#X obj 2561 324 * 1000;
#X text 2639 209 attack;
#X text 2659 281 hold;
#X text 2679 350 release;
#X obj 2523 184 * 1000;
#X obj 2348 480 spigot;
#X obj 2403 504 == 0;
#X text 2436 504 invert toggle;
#X text 2629 618 add time of attack and hold;
#X obj 2505 912 *~;
#X obj 2383 949 *~;
#X obj 2521 695 pack f f f f f;
#X msg 2521 719 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 2626 695 first f only for bang purposes;
#X text 2593 143 off time;
#X text 2665 775 crossfade (OFF-LEVEL);
#X obj 2523 277 +;
#X obj 2523 355 +;
#X obj 2523 431 +;
#X text 2341 253 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 2346 700 sel 1 0;
#X obj 2652 869 *~ 1;
#X msg 2379 725 0 1;
#X msg 2346 725 1 0;
#X obj 2346 751 unpack f f;
#X text 2379 568 asdr ON/OFF;
#X text 2311 453 time toggle ctrl;
#X text 2344 661 external trigger;
#X text 2325 726 on;
#X text 2408 725 off;
#X obj 2347 623 spigot;
#X obj 2331 624 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2380 584 r \$0-ctrl-sig-A;
#X floatatom 2453 900 5 0 0 0 - - -;
#X obj 2380 605 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 2562 116 CHANNEL 2;
#X obj 2523 160 r \$0-adsr-time-2-s;
#X obj 2541 227 r \$0-adsr-attack-2-s;
#X obj 2561 299 r \$0-adsr-hold-2-s;
#X obj 2581 368 r \$0-adsr-release-2-s;
#X obj 2403 480 r \$0-adsr-ttoggle-2-s;
#X obj 2445 545 r \$0-trbang-ch2;
#X obj 2346 677 r \$0-adsr-trigger-2-s;
#X text 2381 805 receive signal from ch2;
#X obj 1830 888 r \$0-env-ch1a;
#X obj 2398 882 r \$0-env-ch2a;
#X obj 2505 1015 outlet~ two;
#X obj 2652 791 r \$0-adsr-level-2-s;
#X obj 3094 736 vline~;
#X floatatom 3221 240 5 0 0 0 - - -;
#X floatatom 3228 312 5 0 0 0 - - -;
#X floatatom 3268 381 5 0 0 0 - - -;
#X obj 3078 880 *~;
#X floatatom 3189 173 5 0 0 0 - - -;
#X obj 2969 542 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2920 524 metro 1000;
#X obj 3175 613 +;
#X obj 3225 812 *~ -1;
#X obj 3225 838 +~ 1;
#X obj 3114 247 * 1000;
#X obj 3154 388 * 1000;
#X obj 3134 319 * 1000;
#X text 3212 204 attack;
#X text 3232 276 hold;
#X text 3252 345 release;
#X obj 3096 179 * 1000;
#X obj 2921 475 spigot;
#X obj 2976 499 == 0;
#X text 3009 499 invert toggle;
#X text 3202 613 add time of attack and hold;
#X obj 3078 907 *~;
#X obj 2956 944 *~;
#X obj 3094 690 pack f f f f f;
#X msg 3094 714 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 3199 690 first f only for bang purposes;
#X text 3166 138 off time;
#X text 3238 770 crossfade (OFF-LEVEL);
#X obj 3096 272 +;
#X obj 3096 350 +;
#X obj 3096 426 +;
#X text 2914 248 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 2919 695 sel 1 0;
#X obj 3225 864 *~ 1;
#X msg 2952 720 0 1;
#X msg 2919 720 1 0;
#X obj 2919 746 unpack f f;
#X text 2952 563 asdr ON/OFF;
#X text 2884 448 time toggle ctrl;
#X text 2917 656 external trigger;
#X text 2898 721 on;
#X text 2981 720 off;
#X obj 2920 618 spigot;
#X obj 2904 619 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 3026 895 5 0 0 0 - - -;
#X obj 2953 600 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 3042 524 bang from B;
#X text 3135 111 CHANNEL 3;
#X obj 3096 155 r \$0-adsr-time-3-s;
#X obj 3114 222 r \$0-adsr-attack-3-s;
#X obj 3134 294 r \$0-adsr-hold-3-s;
#X obj 3154 363 r \$0-adsr-release-3-s;
#X obj 2976 475 r \$0-adsr-ttoggle-3-s;
#X text 2469 529 bang from A;
#X obj 3018 540 r \$0-trbang-ch3;
#X obj 2953 579 r \$0-ctrl-sig-B;
#X obj 1673 121 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1673 1015 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2919 672 r \$0-adsr-trigger-3-s;
#X text 2954 800 receive signal from ch3;
#X obj 2971 877 r \$0-env-ch3b;
#X obj 3078 1010 outlet~ three;
#X obj 3225 786 r \$0-adsr-level-3-s;
#X obj 3699 733 vline~;
#X floatatom 3826 237 5 0 0 0 - - -;
#X floatatom 3833 309 5 0 0 0 - - -;
#X floatatom 3873 378 5 0 0 0 - - -;
#X obj 3683 877 *~;
#X floatatom 3794 170 5 0 0 0 - - -;
#X obj 3574 539 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 3525 521 metro 1000;
#X obj 3780 610 +;
#X obj 3830 809 *~ -1;
#X obj 3830 835 +~ 1;
#X obj 3719 244 * 1000;
#X obj 3759 385 * 1000;
#X obj 3739 316 * 1000;
#X text 3817 201 attack;
#X text 3837 273 hold;
#X text 3857 342 release;
#X obj 3701 176 * 1000;
#X obj 3526 472 spigot;
#X obj 3581 496 == 0;
#X text 3614 496 invert toggle;
#X text 3807 610 add time of attack and hold;
#X obj 3683 904 *~;
#X obj 3561 941 *~;
#X obj 3699 687 pack f f f f f;
#X msg 3699 711 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 3804 687 first f only for bang purposes;
#X text 3771 135 off time;
#X text 3843 767 crossfade (OFF-LEVEL);
#X obj 3701 269 +;
#X obj 3701 347 +;
#X obj 3701 423 +;
#X text 3519 245 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 3524 692 sel 1 0;
#X obj 3830 861 *~ 1;
#X msg 3557 717 0 1;
#X msg 3524 717 1 0;
#X obj 3524 743 unpack f f;
#X text 3557 560 asdr ON/OFF;
#X text 3489 445 time toggle ctrl;
#X text 3522 653 external trigger;
#X text 3503 718 on;
#X text 3586 717 off;
#X obj 3525 615 spigot;
#X obj 3509 616 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 3631 892 5 0 0 0 - - -;
#X obj 3558 597 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 3647 521 bang from B;
#X obj 3558 576 r \$0-ctrl-sig-B;
#X text 3559 797 receive signal from ch3;
#X text 3740 108 CHANNEL 4;
#X obj 3701 152 r \$0-adsr-time-4-s;
#X obj 3719 219 r \$0-adsr-attack-4-s;
#X obj 3739 291 r \$0-adsr-hold-4-s;
#X obj 3759 360 r \$0-adsr-release-4-s;
#X obj 3581 472 r \$0-adsr-ttoggle-4-s;
#X obj 3623 537 r \$0-trbang-ch4;
#X obj 3524 669 r \$0-adsr-trigger-4-s;
#X obj 3830 783 r \$0-adsr-level-4-s;
#X obj 3576 874 r \$0-env-ch4b;
#X obj 3683 1007 outlet~ four;
#X obj 697 138 r~ \$0-ch1-to-A;
#X obj 790 138 r~ \$0-ch3-to-A;
#X obj 1221 136 r~ \$0-ch2-to-B;
#X obj 1313 136 r~ \$0-ch4-to-B;
#X obj 1814 1003 s~ \$0-ch1-to-A;
#X obj 2382 997 s~ \$0-ch2-to-B;
#X obj 2955 992 s~ \$0-ch3-to-A;
#X obj 3560 989 s~ \$0-ch4-to-B;
#X obj 732 815 env~;
#X obj 732 838 dbtorms~;
#X obj 947 965 s \$0-env-ch1a;
#X obj 946 814 env~;
#X obj 946 837 dbtorms~;
#X floatatom 781 855 5 0 0 0 - - -;
#X floatatom 991 854 5 0 0 0 - - -;
#X text 107 903 in general lots of bug when you try to change things
in different order, f 34;
#X obj 1189 52 s~ \$0-adsr-bus-B;
#X obj 1813 829 r~ \$0-adsr-ch1;
#X obj 1363 54 s~ \$0-adsr-ch1;
#X obj 1500 54 s~ \$0-adsr-ch2;
#X obj 1637 54 s~ \$0-adsr-ch3;
#X obj 1772 54 s~ \$0-adsr-ch4;
#X obj 2381 823 r~ \$0-adsr-ch2;
#X obj 2954 818 r~ \$0-adsr-ch3;
#X obj 3559 815 r~ \$0-adsr-ch4;
#X obj 1052 51 s~ \$0-adsr-bus-A;
#X obj 591 138 r~ \$0-adsr-bus-A;
#X obj 1115 136 r~ \$0-adsr-bus-B;
#X connect 1 0 482 0;
#X connect 2 0 473 0;
#X connect 3 0 475 0;
#X connect 4 0 476 0;
#X connect 5 0 477 0;
#X connect 6 0 478 0;
#X connect 15 0 16 0;
#X connect 17 0 18 0;
#X connect 19 0 20 0;
#X connect 21 0 22 0;
#X connect 30 0 31 0;
#X connect 32 0 33 0;
#X connect 34 0 35 0;
#X connect 36 0 37 0;
#X connect 38 0 39 0;
#X connect 40 0 41 0;
#X connect 42 0 43 0;
#X connect 44 0 45 0;
#X connect 46 0 47 0;
#X connect 48 0 49 0;
#X connect 50 0 51 0;
#X connect 52 0 53 0;
#X connect 54 0 55 0;
#X connect 56 0 57 0;
#X connect 58 0 59 0;
#X connect 60 0 61 0;
#X connect 62 0 69 1;
#X connect 66 0 65 0;
#X connect 66 0 83 0;
#X connect 67 0 64 0;
#X connect 67 0 84 0;
#X connect 68 0 63 0;
#X connect 68 0 82 0;
#X connect 69 0 97 0;
#X connect 71 0 70 0;
#X connect 71 0 88 0;
#X connect 74 0 72 0;
#X connect 74 0 171 0;
#X connect 75 0 99 4;
#X connect 76 0 77 0;
#X connect 76 0 98 1;
#X connect 77 0 78 0;
#X connect 78 0 123 0;
#X connect 82 0 75 0;
#X connect 82 0 99 1;
#X connect 82 0 117 1;
#X connect 83 0 99 3;
#X connect 83 0 119 1;
#X connect 84 0 75 1;
#X connect 84 0 99 2;
#X connect 84 0 118 1;
#X connect 88 0 117 0;
#X connect 89 0 74 1;
#X connect 90 0 91 0;
#X connect 91 0 74 0;
#X connect 91 0 89 1;
#X connect 93 0 99 0;
#X connect 93 0 122 0;
#X connect 97 0 14 0;
#X connect 97 0 461 0;
#X connect 98 0 14 0;
#X connect 98 0 461 0;
#X connect 99 0 100 0;
#X connect 100 0 62 0;
#X connect 117 0 118 0;
#X connect 118 0 119 0;
#X connect 119 0 89 0;
#X connect 122 0 125 0;
#X connect 122 1 124 0;
#X connect 123 0 97 1;
#X connect 124 0 126 0;
#X connect 125 0 126 0;
#X connect 126 0 98 1;
#X connect 126 1 123 1;
#X connect 127 0 165 0;
#X connect 127 1 166 0;
#X connect 127 2 167 0;
#X connect 128 0 127 0;
#X connect 129 0 13 0;
#X connect 130 0 139 0;
#X connect 130 0 138 0;
#X connect 130 0 195 0;
#X connect 130 0 196 0;
#X connect 133 0 99 0;
#X connect 134 0 130 0;
#X connect 136 0 155 0;
#X connect 137 0 175 0;
#X connect 137 1 174 0;
#X connect 138 0 180 0;
#X connect 138 0 180 1;
#X connect 139 0 164 0;
#X connect 143 0 144 0;
#X connect 144 0 146 0;
#X connect 146 0 145 0;
#X connect 155 0 137 0;
#X connect 164 0 140 0;
#X connect 164 0 170 0;
#X connect 165 0 169 0;
#X connect 166 0 169 0;
#X connect 167 0 169 0;
#X connect 169 0 183 1;
#X connect 169 0 129 1;
#X connect 169 1 130 1;
#X connect 169 1 155 1;
#X connect 169 1 190 1;
#X connect 169 2 154 0;
#X connect 171 0 99 0;
#X connect 171 0 172 0;
#X connect 173 0 179 0;
#X connect 174 0 176 0;
#X connect 175 0 176 0;
#X connect 176 0 138 1;
#X connect 176 1 139 1;
#X connect 179 0 171 1;
#X connect 180 0 465 0;
#X connect 183 0 129 0;
#X connect 190 0 191 0;
#X connect 191 0 193 0;
#X connect 191 1 192 0;
#X connect 192 0 194 0;
#X connect 193 0 194 0;
#X connect 194 0 195 1;
#X connect 194 1 196 1;
#X connect 195 0 201 0;
#X connect 195 0 201 1;
#X connect 196 0 198 0;
#X connect 198 0 197 0;
#X connect 198 0 199 0;
#X connect 201 0 468 0;
#X connect 203 0 190 0;
#X connect 208 0 221 0;
#X connect 208 1 222 0;
#X connect 208 2 223 0;
#X connect 209 0 270 0;
#X connect 210 0 214 0;
#X connect 210 0 213 0;
#X connect 210 0 245 0;
#X connect 210 0 246 0;
#X connect 212 0 231 0;
#X connect 212 1 230 0;
#X connect 213 0 235 0;
#X connect 213 0 235 1;
#X connect 214 0 220 0;
#X connect 216 0 212 0;
#X connect 220 0 229 0;
#X connect 220 0 266 0;
#X connect 221 0 225 0;
#X connect 222 0 225 0;
#X connect 223 0 225 0;
#X connect 225 0 239 1;
#X connect 225 0 209 1;
#X connect 225 1 210 1;
#X connect 225 1 216 1;
#X connect 225 1 240 1;
#X connect 225 2 263 0;
#X connect 227 0 226 0;
#X connect 227 0 237 0;
#X connect 228 0 227 0;
#X connect 230 0 232 0;
#X connect 231 0 232 0;
#X connect 232 0 213 1;
#X connect 232 1 214 1;
#X connect 235 0 236 0;
#X connect 236 0 227 0;
#X connect 237 0 238 0;
#X connect 238 0 268 0;
#X connect 239 0 209 0;
#X connect 240 0 241 0;
#X connect 241 0 243 0;
#X connect 241 1 242 0;
#X connect 242 0 244 0;
#X connect 243 0 244 0;
#X connect 244 0 245 1;
#X connect 244 1 246 1;
#X connect 245 0 254 0;
#X connect 245 0 254 1;
#X connect 246 0 247 0;
#X connect 247 0 248 0;
#X connect 247 0 267 0;
#X connect 251 0 250 0;
#X connect 251 0 256 0;
#X connect 252 0 251 0;
#X connect 254 0 255 0;
#X connect 255 0 251 0;
#X connect 256 0 257 0;
#X connect 257 0 269 0;
#X connect 260 0 208 0;
#X connect 262 0 210 0;
#X connect 264 0 216 0;
#X connect 265 0 240 0;
#X connect 271 0 275 1;
#X connect 275 0 293 0;
#X connect 278 0 277 0;
#X connect 278 0 314 0;
#X connect 279 0 295 4;
#X connect 280 0 281 0;
#X connect 281 0 305 0;
#X connect 282 0 279 0;
#X connect 282 0 295 1;
#X connect 282 0 300 1;
#X connect 283 0 295 3;
#X connect 283 0 302 1;
#X connect 284 0 279 1;
#X connect 284 0 295 2;
#X connect 284 0 301 1;
#X connect 288 0 300 0;
#X connect 289 0 278 1;
#X connect 290 0 278 0;
#X connect 290 0 289 1;
#X connect 293 0 330 0;
#X connect 293 0 462 0;
#X connect 294 0 330 0;
#X connect 294 0 462 0;
#X connect 295 0 296 0;
#X connect 296 0 271 0;
#X connect 300 0 301 0;
#X connect 301 0 302 0;
#X connect 302 0 289 0;
#X connect 304 0 307 0;
#X connect 304 1 306 0;
#X connect 305 0 293 1;
#X connect 306 0 308 0;
#X connect 307 0 308 0;
#X connect 308 0 294 1;
#X connect 308 1 305 1;
#X connect 314 0 295 0;
#X connect 314 0 315 0;
#X connect 316 0 318 0;
#X connect 318 0 314 1;
#X connect 320 0 276 0;
#X connect 320 0 288 0;
#X connect 321 0 272 0;
#X connect 321 0 282 0;
#X connect 322 0 273 0;
#X connect 322 0 284 0;
#X connect 323 0 274 0;
#X connect 323 0 283 0;
#X connect 324 0 290 0;
#X connect 325 0 295 0;
#X connect 326 0 295 0;
#X connect 326 0 304 0;
#X connect 328 0 177 0;
#X connect 328 0 98 1;
#X connect 329 0 317 0;
#X connect 329 0 294 1;
#X connect 331 0 280 0;
#X connect 331 0 294 1;
#X connect 332 0 336 1;
#X connect 336 0 354 0;
#X connect 339 0 338 0;
#X connect 339 0 375 0;
#X connect 340 0 356 4;
#X connect 341 0 342 0;
#X connect 342 0 366 0;
#X connect 343 0 340 0;
#X connect 343 0 356 1;
#X connect 343 0 361 1;
#X connect 344 0 356 3;
#X connect 344 0 363 1;
#X connect 345 0 340 1;
#X connect 345 0 356 2;
#X connect 345 0 362 1;
#X connect 349 0 361 0;
#X connect 350 0 339 1;
#X connect 351 0 339 0;
#X connect 351 0 350 1;
#X connect 354 0 394 0;
#X connect 354 0 463 0;
#X connect 355 0 394 0;
#X connect 355 0 463 0;
#X connect 356 0 357 0;
#X connect 357 0 332 0;
#X connect 361 0 362 0;
#X connect 362 0 363 0;
#X connect 363 0 350 0;
#X connect 365 0 368 0;
#X connect 365 1 367 0;
#X connect 366 0 354 1;
#X connect 367 0 369 0;
#X connect 368 0 369 0;
#X connect 369 0 355 1;
#X connect 369 1 366 1;
#X connect 375 0 356 0;
#X connect 375 0 376 0;
#X connect 378 0 375 1;
#X connect 381 0 337 0;
#X connect 381 0 349 0;
#X connect 382 0 333 0;
#X connect 382 0 343 0;
#X connect 383 0 334 0;
#X connect 383 0 345 0;
#X connect 384 0 335 0;
#X connect 384 0 344 0;
#X connect 385 0 351 0;
#X connect 387 0 356 0;
#X connect 388 0 378 0;
#X connect 389 0 390 0;
#X connect 391 0 356 0;
#X connect 391 0 365 0;
#X connect 393 0 377 0;
#X connect 393 0 355 1;
#X connect 395 0 341 0;
#X connect 395 0 355 1;
#X connect 396 0 400 1;
#X connect 400 0 418 0;
#X connect 403 0 402 0;
#X connect 403 0 439 0;
#X connect 404 0 420 4;
#X connect 405 0 406 0;
#X connect 406 0 430 0;
#X connect 407 0 404 0;
#X connect 407 0 420 1;
#X connect 407 0 425 1;
#X connect 408 0 420 3;
#X connect 408 0 427 1;
#X connect 409 0 404 1;
#X connect 409 0 420 2;
#X connect 409 0 426 1;
#X connect 413 0 425 0;
#X connect 414 0 403 1;
#X connect 415 0 403 0;
#X connect 415 0 414 1;
#X connect 418 0 456 0;
#X connect 418 0 464 0;
#X connect 419 0 456 0;
#X connect 419 0 464 0;
#X connect 420 0 421 0;
#X connect 421 0 396 0;
#X connect 425 0 426 0;
#X connect 426 0 427 0;
#X connect 427 0 414 0;
#X connect 429 0 432 0;
#X connect 429 1 431 0;
#X connect 430 0 418 1;
#X connect 431 0 433 0;
#X connect 432 0 433 0;
#X connect 433 0 419 1;
#X connect 433 1 430 1;
#X connect 439 0 420 0;
#X connect 439 0 440 0;
#X connect 442 0 439 1;
#X connect 444 0 442 0;
#X connect 447 0 401 0;
#X connect 447 0 413 0;
#X connect 448 0 397 0;
#X connect 448 0 407 0;
#X connect 449 0 398 0;
#X connect 449 0 409 0;
#X connect 450 0 399 0;
#X connect 450 0 408 0;
#X connect 451 0 415 0;
#X connect 452 0 420 0;
#X connect 453 0 420 0;
#X connect 453 0 429 0;
#X connect 454 0 405 0;
#X connect 454 0 419 1;
#X connect 455 0 441 0;
#X connect 455 0 419 1;
#X connect 457 0 129 0;
#X connect 458 0 129 0;
#X connect 459 0 209 0;
#X connect 460 0 209 0;
#X connect 465 0 466 0;
#X connect 466 0 202 0;
#X connect 466 0 470 0;
#X connect 468 0 469 0;
#X connect 469 0 467 0;
#X connect 469 0 471 0;
#X connect 474 0 69 0;
#X connect 474 0 98 0;
#X connect 479 0 275 0;
#X connect 479 0 294 0;
#X connect 480 0 336 0;
#X connect 480 0 355 0;
#X connect 481 0 400 0;
#X connect 481 0 419 0;
#X connect 483 0 183 0;
#X connect 484 0 239 0;
#X coords 0 -1 1 1 430 320 2 100 100;
