#N canvas 0 56 1366 679 10;
#X declare -lib moonlib;
#X obj 101 103 cnv 15 428 314 empty empty QUAD-ENVELOPE-SHAPER_3104
10 35 0 15 -233017 -66577 0;
#X obj 1052 28 inlet~ A;
#X obj 1188 27 inlet~ B;
#X obj 1363 29 inlet~ one;
#X obj 1484 28 inlet~ two;
#X obj 1606 28 inlet~ three;
#X obj 1730 28 inlet~ four;
#X text 116 102 A;
#X text 183 102 B;
#X text 268 101 1;
#X text 351 101 2;
#X text 436 101 3;
#X text 517 101 4;
#X obj 604 1017 outlet~ A;
#X obj 1937 1021 outlet~ one;
#X obj 193 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-1-s \$0-adsr-attack-1-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 176 5 0 0 0 - - -;
#X obj 193 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-1-s \$0-adsr-hold-1-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 219 5 0 0 0 - - -;
#X obj 193 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-1-s \$0-adsr-release-1-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 262 5 0 0 0 - - -;
#X obj 193 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-1-s \$0-adsr-time-1-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 193 305 5 0 0 0 - - -;
#X text 116 400 A;
#X text 183 400 B;
#X text 268 399 1;
#X text 352 399 2;
#X text 437 399 3;
#X text 517 399 4;
#X text 404 82 Knob size: 22;
#X obj 193 346 mknob 22 100 0 1 0 1 \$0-adsr-level-1-s \$0-adsr-level-1-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 193 369 5 0 0 0 - - -;
#X obj 279 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-2-s \$0-adsr-attack-2-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 176 5 0 0 0 - - -;
#X obj 279 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-2-s \$0-adsr-hold-2-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 219 5 0 0 0 - - -;
#X obj 279 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-2-s \$0-adsr-release-2-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 262 5 0 0 0 - - -;
#X obj 279 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-2-s \$0-adsr-time-2-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 279 305 5 0 0 0 - - -;
#X obj 279 346 mknob 22 100 0 1 0 1 \$0-adsr-level-2-s \$0-adsr-level-2-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 279 369 5 0 0 0 - - -;
#X obj 368 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-3-s \$0-adsr-attack-3-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 176 5 0 0 0 - - -;
#X obj 368 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-3-s \$0-adsr-hold-3-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 219 5 0 0 0 - - -;
#X obj 368 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-3-s \$0-adsr-release-3-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 262 5 0 0 0 - - -;
#X obj 368 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-3-s \$0-adsr-time-3-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 368 305 5 0 0 0 - - -;
#X obj 368 346 mknob 22 100 0 1 0 1 \$0-adsr-level-3-s \$0-adsr-level-3-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 368 369 5 0 0 0 - - -;
#X obj 457 153 mknob 22 100 0.1 10 0 1 \$0-adsr-attack-4-s \$0-adsr-attack-4-r
A -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 176 5 0 0 0 - - -;
#X obj 457 196 mknob 22 100 0.1 10 0 1 \$0-adsr-hold-4-s \$0-adsr-hold-4-r
S -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 219 5 0 0 0 - - -;
#X obj 457 239 mknob 22 100 0.1 10 0 1 \$0-adsr-release-4-s \$0-adsr-release-4-r
R -8 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 262 5 0 0 0 - - -;
#X obj 457 282 mknob 22 100 0.1 10 0 1 \$0-adsr-time-4-s \$0-adsr-time-4-r
time -22 10 0 8 -1 -262144 -1 0 1;
#X floatatom 457 305 5 0 0 0 - - -;
#X obj 457 346 mknob 22 100 0 1 0 1 \$0-adsr-level-4-s \$0-adsr-level-4-r
OFF-LEVEL 2 -5 0 8 -258113 -262144 -1 0 1;
#X floatatom 457 369 5 0 0 0 - - -;
#X obj 1953 747 vline~;
#X floatatom 2080 251 5 0 0 0 - - -;
#X floatatom 2087 323 5 0 0 0 - - -;
#X floatatom 2127 392 5 0 0 0 - - -;
#X obj 2013 374 r \$0-adsr-release-1-s;
#X obj 1993 305 r \$0-adsr-hold-1-s;
#X obj 1973 233 r \$0-adsr-attack-1-s;
#X obj 1937 891 *~;
#X floatatom 2048 184 5 0 0 0 - - -;
#X obj 1955 166 r \$0-adsr-time-1-s;
#X obj 1828 553 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 240 436 crossfader;
#X obj 1779 535 metro 1000;
#X obj 2034 624 +;
#X obj 1363 54 s~ \$0-channel-1;
#X obj 1813 829 r~ \$0-channel-1;
#X obj 2084 797 r \$0-adsr-level-1-s;
#X obj 2084 823 *~ -1;
#X obj 2084 849 +~ 1;
#X text 246 421 OFF-LEVEL;
#X obj 224 203 tgl 10 0 \$0-adsr-htoggle-1-s \$0-adsr-htoggle-1-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 224 288 tgl 10 0 \$0-adsr-ttoggle-1-s \$0-adsr-ttoggle-1-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 1973 258 * 1000;
#X obj 2013 399 * 1000;
#X obj 1993 330 * 1000;
#X text 2071 215 attack;
#X text 2091 287 hold;
#X text 2111 356 release;
#X obj 1955 190 * 1000;
#X obj 1780 486 spigot;
#X obj 1835 486 r \$0-adsr-ttoggle-1-s;
#X obj 1835 510 == 0;
#X text 1868 510 invert toggle;
#X obj 1778 683 r \$0-adsr-trigger-1-s;
#X text 102 451 0 - enveloped signal goes through;
#X text 126 466 1 - whole signal goes through;
#X text 2061 624 add time of attack and hold;
#X obj 1937 918 *~;
#X obj 1815 955 *~;
#X obj 1953 701 pack f f f f f;
#X msg 1953 725 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 2058 701 first f only for bang purposes;
#X obj 309 202 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 310 288 tgl 10 0 \$0-adsr-ttoggle-2-s \$0-adsr-ttoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 397 202 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 398 288 tgl 10 0 \$0-adsr-ttoggle-3-s \$0-adsr-ttoggle-3-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 489 203 tgl 10 0 \$0-adsr-htoggle-2-s \$0-adsr-htoggle-2-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 490 289 tgl 10 0 \$0-adsr-ttoggle-4-s \$0-adsr-ttoggle-4-r 8
12 6 0 8 -262144 -1 -1 0 1;
#X obj 1484 53 s~ \$0-channel-2;
#X obj 1606 53 s~ \$0-channel-3;
#X obj 1730 53 s~ \$0-channel-4;
#X text 1813 811 receive signal from ch1;
#X text 1994 122 CHANNEL 1;
#X text 2025 149 off time;
#X obj 12 10 declare -lib moonlib;
#X obj 179 346 tgl 10 0 \$0-adsr-ttroggle-1-s \$0-adsr-ttroggle-1-r
trig/track -38 17 0 8 -262144 -1 -1 0 1;
#X obj 265 346 tgl 10 0 \$0-adsr-ttroggle-2-s \$0-adsr-ttroggle-2-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X obj 354 346 tgl 10 0 \$0-adsr-ttroggle-3-s \$0-adsr-ttroggle-3-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X obj 442 346 tgl 10 0 \$0-adsr-ttroggle-4-s \$0-adsr-ttroggle-4-r
empty -38 17 0 8 -262144 -1 -1 0 1;
#X text 2097 781 crossfade (OFF-LEVEL);
#X obj 1955 283 +;
#X obj 1955 361 +;
#X obj 1955 437 +;
#X text 1773 259 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 222 356 tgl 12 0 \$0-adsr-trigger-1-s \$0-adsr-trigger-1-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 1778 706 sel 1 0;
#X obj 2084 875 *~ 1;
#X msg 1811 731 0 1;
#X msg 1778 731 1 0;
#X obj 1778 757 unpack f f;
#X obj 620 200 sel 0 1 2;
#X obj 620 177 r \$0-atoggle-s;
#X obj 605 453 *~;
#X obj 639 453 *~;
#X text 483 837 just passing through;
#X text 114 480 off (0) - track | on (1) - trig;
#X obj 1877 551 r \$0-trbang-ch1;
#X obj 1052 51 s~ \$0-bus-A;
#X obj 639 293 r~ \$0-bus-A;
#X text 1811 574 asdr ON/OFF;
#X obj 714 421 r \$0-adsr-ttroggle-1-s;
#X obj 671 491 sel 0 1;
#X obj 640 596 *~;
#X obj 669 596 *~;
#X obj 669 681 s \$0-trbang-ch1;
#X text 753 225 controls;
#X obj 1189 52 s~ \$0-bus-B;
#X text 647 103 BUS A;
#X obj 489 469 r \$0-atoggle-s;
#X obj 489 492 != 0;
#X obj 489 538 s \$0-tick;
#X obj 489 515 metro 100;
#X text 1743 459 time toggle ctrl;
#X text 1776 667 external trigger;
#X text 1757 732 on;
#X text 1840 731 off;
#X text 1901 535 bang from A;
#X obj 109 178 vradio 12 1 0 3 \$0-atoggle-s \$0-atoggle-r empty 0
-8 0 10 -262144 -1 -1 1;
#X obj 110 305 vradio 12 1 0 3 \$0-btoggle-s \$0-btoggle-r empty 0
-8 0 10 -262144 -1 -1 0;
#X obj 689 363 s \$0-ctrl-sig-A;
#X obj 671 453 spigot;
#X text 723 450 ignore trig/track toggle in mode 0, f 17;
#X text 722 485 0: track mode 1: trig mode, f 14;
#X text 673 120 ch 1 & 3;
#X text 488 450 startup;
#X text 659 275 control signal from A;
#X text 125 176 A - 12, f 2;
#X text 126 302 B - 34, f 2;
#X text 699 596 detect trigger;
#X obj 669 619 threshold~ 0.5 5000 0 0;
#X msg 620 226 1 0 1;
#X msg 663 226 1 1 0;
#X msg 709 226 0 1 0;
#X text 789 363 adsr ON/OFF;
#X obj 620 337 unpack f f f;
#X floatatom 680 885 5 0 0 0 - - -;
#X obj 642 867 snapshot~;
#X obj 670 843 r \$0-tick;
#X obj 796 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1779 629 spigot;
#X obj 1763 630 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1812 590 r \$0-ctrl-sig-A;
#X msg 717 518 0 1;
#X msg 671 518 1 0;
#X obj 671 544 unpack f f;
#X floatatom 1885 906 5 0 0 0 - - -;
#X text 720 868 this causes jumps and is NOT smooth, f 12;
#X text 702 665 send bang to adsr;
#X obj 1812 611 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 641 790 *~;
#X obj 641 813 sqrt~;
#X text 95 917 manual trig should just play release;
#X obj 642 909 pack 0 10;
#X obj 642 938 line;
#X text 95 944 tracking not smooth. Using env~ makes it stuck at a
level of 0.7, f 36;
#X obj 533 136 r~ \$0-bus-A;
#X obj 534 396 *~;
#X text 107 983 control signal has trigger overlap;
#X text 53 845 toggle ext. signal to A and then trig/track and then
and then to - or 12 does not change trig/track. You have to manually
set trig/track AGAIN., f 43;
#X text 148 812 BUGS TO FIX, f 12;
#X text 761 22 How do I abstract this :((((;
#X obj 308 356 tgl 12 0 \$0-adsr-trigger-2-s \$0-adsr-trigger-2-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 397 356 tgl 12 0 \$0-adsr-trigger-3-s \$0-adsr-trigger-3-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 485 356 tgl 12 0 \$0-adsr-trigger-4-s \$0-adsr-trigger-4-r empty
17 7 0 10 -258113 -262144 -1 0 1;
#X obj 857 452 spigot;
#X obj 857 492 sel 0 1;
#X msg 903 519 0 1;
#X msg 857 519 1 0;
#X obj 857 545 unpack f f;
#X obj 855 596 *~;
#X obj 884 596 *~;
#X obj 884 681 s \$0-trbang-ch2;
#X obj 884 619 threshold~ 0.5 5000 0 0;
#X obj 1011 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 917 664 send bang to adsr;
#X floatatom 894 885 5 0 0 0 - - -;
#X obj 856 867 snapshot~;
#X obj 884 843 r \$0-tick;
#X text 934 868 this causes jumps and is NOT smooth, f 12;
#X obj 855 790 *~;
#X obj 855 813 sqrt~;
#X obj 856 909 pack 0 10;
#X obj 856 938 line;
#X obj 642 964 s \$0-env-ch1a;
#X obj 856 964 s \$0-env-ch2a;
#X obj 857 421 r \$0-adsr-ttroggle-2-s;
#X text 173 658 TO DO, f 7;
#X text 53 686 Create subpatches and clean the patch, f 43;
#X text 53 703 Create help-file, f 43;
#X text 53 720 Implement hold-inf toggle, f 43;
#X obj 1235 200 sel 0 1 2;
#X obj 1220 453 *~;
#X obj 1254 453 *~;
#X text 1098 837 just passing through;
#X obj 1286 491 sel 0 1;
#X obj 1255 596 *~;
#X obj 1284 596 *~;
#X text 1368 225 controls;
#X obj 1286 453 spigot;
#X text 1338 450 ignore trig/track toggle in mode 0, f 17;
#X text 1337 485 0: track mode 1: trig mode, f 14;
#X text 1314 596 detect trigger;
#X obj 1284 619 threshold~ 0.5 5000 0 0;
#X msg 1235 226 1 0 1;
#X msg 1278 226 1 1 0;
#X msg 1324 226 0 1 0;
#X text 1404 363 adsr ON/OFF;
#X obj 1235 337 unpack f f f;
#X floatatom 1295 885 5 0 0 0 - - -;
#X obj 1257 867 snapshot~;
#X obj 1285 843 r \$0-tick;
#X obj 1411 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1332 518 0 1;
#X msg 1286 518 1 0;
#X obj 1286 544 unpack f f;
#X text 1335 868 this causes jumps and is NOT smooth, f 12;
#X text 1317 665 send bang to adsr;
#X obj 1256 790 *~;
#X obj 1256 813 sqrt~;
#X obj 1257 909 pack 0 10;
#X obj 1257 938 line;
#X obj 1149 396 *~;
#X obj 1472 452 spigot;
#X obj 1472 492 sel 0 1;
#X msg 1518 519 0 1;
#X msg 1472 519 1 0;
#X obj 1472 545 unpack f f;
#X obj 1470 596 *~;
#X obj 1499 596 *~;
#X obj 1499 619 threshold~ 0.5 5000 0 0;
#X obj 1626 637 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 1532 664 send bang to adsr;
#X floatatom 1509 885 5 0 0 0 - - -;
#X obj 1471 867 snapshot~;
#X obj 1499 843 r \$0-tick;
#X text 1549 868 this causes jumps and is NOT smooth, f 12;
#X obj 1470 790 *~;
#X obj 1470 813 sqrt~;
#X obj 1471 909 pack 0 10;
#X obj 1471 938 line;
#X text 1262 103 BUS B;
#X obj 1148 136 r~ \$0-bus-B;
#X text 1290 118 ch 2 & 4;
#X obj 1235 177 r \$0-btoggle-s;
#X text 1274 275 control signal from B;
#X obj 1254 293 r~ \$0-bus-B;
#X obj 1304 363 s \$0-ctrl-sig-B;
#X obj 1329 421 r \$0-adsr-ttroggle-3-s;
#X obj 1472 421 r \$0-adsr-ttroggle-4-s;
#X obj 1284 681 s \$0-trbang-ch3;
#X obj 1499 681 s \$0-trbang-ch4;
#X obj 1257 964 s \$0-env-ch3b;
#X obj 1471 964 s \$0-env-ch3b;
#X obj 1219 1017 outlet~ B;
#X obj 2521 741 vline~;
#X floatatom 2648 245 5 0 0 0 - - -;
#X floatatom 2655 317 5 0 0 0 - - -;
#X floatatom 2695 386 5 0 0 0 - - -;
#X obj 2505 885 *~;
#X floatatom 2616 178 5 0 0 0 - - -;
#X obj 2396 547 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2347 529 metro 1000;
#X obj 2602 618 +;
#X obj 2652 817 *~ -1;
#X obj 2652 843 +~ 1;
#X obj 2541 252 * 1000;
#X obj 2581 393 * 1000;
#X obj 2561 324 * 1000;
#X text 2639 209 attack;
#X text 2659 281 hold;
#X text 2679 350 release;
#X obj 2523 184 * 1000;
#X obj 2348 480 spigot;
#X obj 2403 504 == 0;
#X text 2436 504 invert toggle;
#X text 2629 618 add time of attack and hold;
#X obj 2505 912 *~;
#X obj 2383 949 *~;
#X obj 2521 695 pack f f f f f;
#X msg 2521 719 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 2626 695 first f only for bang purposes;
#X text 2593 143 off time;
#X text 2665 775 crossfade (OFF-LEVEL);
#X obj 2523 277 +;
#X obj 2523 355 +;
#X obj 2523 431 +;
#X text 2341 253 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 2346 700 sel 1 0;
#X obj 2652 869 *~ 1;
#X msg 2379 725 0 1;
#X msg 2346 725 1 0;
#X obj 2346 751 unpack f f;
#X text 2379 568 asdr ON/OFF;
#X text 2311 453 time toggle ctrl;
#X text 2344 661 external trigger;
#X text 2325 726 on;
#X text 2408 725 off;
#X obj 2347 623 spigot;
#X obj 2331 624 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2380 584 r \$0-ctrl-sig-A;
#X floatatom 2453 900 5 0 0 0 - - -;
#X obj 2380 605 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 2562 116 CHANNEL 2;
#X obj 2523 160 r \$0-adsr-time-2-s;
#X obj 2541 227 r \$0-adsr-attack-2-s;
#X obj 2561 299 r \$0-adsr-hold-2-s;
#X obj 2581 368 r \$0-adsr-release-2-s;
#X obj 2403 480 r \$0-adsr-ttoggle-2-s;
#X obj 2445 545 r \$0-trbang-ch2;
#X obj 2346 677 r \$0-adsr-trigger-2-s;
#X obj 2381 823 r~ \$0-channel-2;
#X text 2381 805 receive signal from ch2;
#X obj 1830 888 r \$0-env-ch1a;
#X obj 2398 882 r \$0-env-ch2a;
#X obj 2505 1015 outlet~ two;
#X obj 2652 791 r \$0-adsr-level-2-s;
#X obj 3094 736 vline~;
#X floatatom 3221 240 5 0 0 0 - - -;
#X floatatom 3228 312 5 0 0 0 - - -;
#X floatatom 3268 381 5 0 0 0 - - -;
#X obj 3078 880 *~;
#X floatatom 3189 173 5 0 0 0 - - -;
#X obj 2969 542 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2920 524 metro 1000;
#X obj 3175 613 +;
#X obj 3225 812 *~ -1;
#X obj 3225 838 +~ 1;
#X obj 3114 247 * 1000;
#X obj 3154 388 * 1000;
#X obj 3134 319 * 1000;
#X text 3212 204 attack;
#X text 3232 276 hold;
#X text 3252 345 release;
#X obj 3096 179 * 1000;
#X obj 2921 475 spigot;
#X obj 2976 499 == 0;
#X text 3009 499 invert toggle;
#X text 3202 613 add time of attack and hold;
#X obj 3078 907 *~;
#X obj 2956 944 *~;
#X obj 3094 690 pack f f f f f;
#X msg 3094 714 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 3199 690 first f only for bang purposes;
#X text 3166 138 off time;
#X text 3238 770 crossfade (OFF-LEVEL);
#X obj 3096 272 +;
#X obj 3096 350 +;
#X obj 3096 426 +;
#X text 2914 248 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 2919 695 sel 1 0;
#X obj 3225 864 *~ 1;
#X msg 2952 720 0 1;
#X msg 2919 720 1 0;
#X obj 2919 746 unpack f f;
#X text 2952 563 asdr ON/OFF;
#X text 2884 448 time toggle ctrl;
#X text 2917 656 external trigger;
#X text 2898 721 on;
#X text 2981 720 off;
#X obj 2920 618 spigot;
#X obj 2904 619 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 3026 895 5 0 0 0 - - -;
#X obj 2953 600 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 3042 524 bang from B;
#X text 3135 111 CHANNEL 3;
#X obj 3096 155 r \$0-adsr-time-3-s;
#X obj 3114 222 r \$0-adsr-attack-3-s;
#X obj 3134 294 r \$0-adsr-hold-3-s;
#X obj 3154 363 r \$0-adsr-release-3-s;
#X obj 2976 475 r \$0-adsr-ttoggle-3-s;
#X text 2469 529 bang from A;
#X obj 3018 540 r \$0-trbang-ch3;
#X obj 2953 579 r \$0-ctrl-sig-B;
#X obj 1673 121 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1673 1015 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 2919 672 r \$0-adsr-trigger-3-s;
#X obj 2954 818 r~ \$0-channel-3;
#X text 2954 800 receive signal from ch3;
#X obj 2971 877 r \$0-env-ch3b;
#X obj 3078 1010 outlet~ three;
#X obj 3225 786 r \$0-adsr-level-3-s;
#X obj 3699 733 vline~;
#X floatatom 3826 237 5 0 0 0 - - -;
#X floatatom 3833 309 5 0 0 0 - - -;
#X floatatom 3873 378 5 0 0 0 - - -;
#X obj 3683 877 *~;
#X floatatom 3794 170 5 0 0 0 - - -;
#X obj 3574 539 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 3525 521 metro 1000;
#X obj 3780 610 +;
#X obj 3830 809 *~ -1;
#X obj 3830 835 +~ 1;
#X obj 3719 244 * 1000;
#X obj 3759 385 * 1000;
#X obj 3739 316 * 1000;
#X text 3817 201 attack;
#X text 3837 273 hold;
#X text 3857 342 release;
#X obj 3701 176 * 1000;
#X obj 3526 472 spigot;
#X obj 3581 496 == 0;
#X text 3614 496 invert toggle;
#X text 3807 610 add time of attack and hold;
#X obj 3683 904 *~;
#X obj 3561 941 *~;
#X obj 3699 687 pack f f f f f;
#X msg 3699 711 1 \$2 \, 1 \$3 \$2 \, 0 \$4 \$5;
#X text 3804 687 first f only for bang purposes;
#X text 3771 135 off time;
#X text 3843 767 crossfade (OFF-LEVEL);
#X obj 3701 269 +;
#X obj 3701 347 +;
#X obj 3701 423 +;
#X text 3519 245 lots of addition so that off-time starts counting
after the envelope is "done", f 26;
#X obj 3524 692 sel 1 0;
#X obj 3830 861 *~ 1;
#X msg 3557 717 0 1;
#X msg 3524 717 1 0;
#X obj 3524 743 unpack f f;
#X text 3557 560 asdr ON/OFF;
#X text 3489 445 time toggle ctrl;
#X text 3522 653 external trigger;
#X text 3503 718 on;
#X text 3586 717 off;
#X obj 3525 615 spigot;
#X obj 3509 616 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 3631 892 5 0 0 0 - - -;
#X obj 3558 597 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X text 3647 521 bang from B;
#X obj 3558 576 r \$0-ctrl-sig-B;
#X text 3559 797 receive signal from ch3;
#X text 3740 108 CHANNEL 4;
#X obj 3701 152 r \$0-adsr-time-4-s;
#X obj 3719 219 r \$0-adsr-attack-4-s;
#X obj 3739 291 r \$0-adsr-hold-4-s;
#X obj 3759 360 r \$0-adsr-release-4-s;
#X obj 3581 472 r \$0-adsr-ttoggle-4-s;
#X obj 3623 537 r \$0-trbang-ch4;
#X obj 3524 669 r \$0-adsr-trigger-4-s;
#X obj 3830 783 r \$0-adsr-level-4-s;
#X obj 3559 815 r~ \$0-channel-4;
#X obj 3576 874 r \$0-env-ch4b;
#X obj 3683 1007 outlet~ four;
#X obj 606 136 r~ \$0-ch1-to-A;
#X obj 699 136 r~ \$0-ch3-to-A;
#X obj 1221 136 r~ \$0-ch2-to-B;
#X obj 1313 136 r~ \$0-ch4-to-B;
#X obj 1814 1003 s~ \$0-ch1-to-A;
#X obj 2382 997 s~ \$0-ch2-to-B;
#X obj 2955 992 s~ \$0-ch3-to-A;
#X obj 3560 989 s~ \$0-ch4-to-B;
#X text 107 1008 lots of bug when you try to change things in different
order, f 34;
#X connect 1 0 139 0;
#X connect 2 0 148 0;
#X connect 3 0 76 0;
#X connect 4 0 110 0;
#X connect 5 0 111 0;
#X connect 6 0 112 0;
#X connect 15 0 16 0;
#X connect 17 0 18 0;
#X connect 19 0 20 0;
#X connect 21 0 22 0;
#X connect 30 0 31 0;
#X connect 32 0 33 0;
#X connect 34 0 35 0;
#X connect 36 0 37 0;
#X connect 38 0 39 0;
#X connect 40 0 41 0;
#X connect 42 0 43 0;
#X connect 44 0 45 0;
#X connect 46 0 47 0;
#X connect 48 0 49 0;
#X connect 50 0 51 0;
#X connect 52 0 53 0;
#X connect 54 0 55 0;
#X connect 56 0 57 0;
#X connect 58 0 59 0;
#X connect 60 0 61 0;
#X connect 62 0 69 1;
#X connect 66 0 65 0;
#X connect 66 0 85 0;
#X connect 67 0 64 0;
#X connect 67 0 86 0;
#X connect 68 0 63 0;
#X connect 68 0 84 0;
#X connect 69 0 99 0;
#X connect 71 0 70 0;
#X connect 71 0 90 0;
#X connect 74 0 72 0;
#X connect 74 0 181 0;
#X connect 75 0 101 4;
#X connect 77 0 69 0;
#X connect 77 0 100 0;
#X connect 78 0 79 0;
#X connect 78 0 100 1;
#X connect 79 0 80 0;
#X connect 80 0 128 0;
#X connect 84 0 75 0;
#X connect 84 0 101 1;
#X connect 84 0 122 1;
#X connect 85 0 101 3;
#X connect 85 0 124 1;
#X connect 86 0 75 1;
#X connect 86 0 101 2;
#X connect 86 0 123 1;
#X connect 90 0 122 0;
#X connect 91 0 74 1;
#X connect 92 0 93 0;
#X connect 93 0 74 0;
#X connect 93 0 91 1;
#X connect 95 0 101 0;
#X connect 95 0 127 0;
#X connect 99 0 14 0;
#X connect 99 0 489 0;
#X connect 100 0 14 0;
#X connect 100 0 489 0;
#X connect 101 0 102 0;
#X connect 102 0 62 0;
#X connect 122 0 123 0;
#X connect 123 0 124 0;
#X connect 124 0 91 0;
#X connect 127 0 130 0;
#X connect 127 1 129 0;
#X connect 128 0 99 1;
#X connect 129 0 131 0;
#X connect 130 0 131 0;
#X connect 131 0 100 1;
#X connect 131 1 128 1;
#X connect 132 0 172 0;
#X connect 132 1 173 0;
#X connect 132 2 174 0;
#X connect 133 0 132 0;
#X connect 134 0 13 0;
#X connect 135 0 145 0;
#X connect 135 0 144 0;
#X connect 135 0 211 0;
#X connect 135 0 212 0;
#X connect 138 0 101 0;
#X connect 140 0 135 0;
#X connect 142 0 162 0;
#X connect 143 0 185 0;
#X connect 143 1 184 0;
#X connect 144 0 191 0;
#X connect 144 0 191 1;
#X connect 145 0 171 0;
#X connect 150 0 151 0;
#X connect 151 0 153 0;
#X connect 153 0 152 0;
#X connect 162 0 143 0;
#X connect 171 0 146 0;
#X connect 171 0 180 0;
#X connect 172 0 176 0;
#X connect 173 0 176 0;
#X connect 174 0 176 0;
#X connect 176 0 198 1;
#X connect 176 0 134 1;
#X connect 176 1 135 1;
#X connect 176 1 162 1;
#X connect 176 1 206 1;
#X connect 176 2 161 0;
#X connect 178 0 177 0;
#X connect 178 0 194 0;
#X connect 179 0 178 0;
#X connect 181 0 101 0;
#X connect 181 0 182 0;
#X connect 183 0 190 0;
#X connect 184 0 186 0;
#X connect 185 0 186 0;
#X connect 186 0 144 1;
#X connect 186 1 145 1;
#X connect 190 0 181 1;
#X connect 191 0 192 0;
#X connect 192 0 178 0;
#X connect 194 0 195 0;
#X connect 195 0 225 0;
#X connect 197 0 198 0;
#X connect 198 0 134 0;
#X connect 206 0 207 0;
#X connect 207 0 209 0;
#X connect 207 1 208 0;
#X connect 208 0 210 0;
#X connect 209 0 210 0;
#X connect 210 0 211 1;
#X connect 210 1 212 1;
#X connect 211 0 221 0;
#X connect 211 0 221 1;
#X connect 212 0 214 0;
#X connect 214 0 213 0;
#X connect 214 0 215 0;
#X connect 218 0 217 0;
#X connect 218 0 223 0;
#X connect 219 0 218 0;
#X connect 221 0 222 0;
#X connect 222 0 218 0;
#X connect 223 0 224 0;
#X connect 224 0 226 0;
#X connect 227 0 206 0;
#X connect 232 0 245 0;
#X connect 232 1 246 0;
#X connect 232 2 247 0;
#X connect 233 0 295 0;
#X connect 234 0 238 0;
#X connect 234 0 237 0;
#X connect 234 0 269 0;
#X connect 234 0 270 0;
#X connect 236 0 255 0;
#X connect 236 1 254 0;
#X connect 237 0 259 0;
#X connect 237 0 259 1;
#X connect 238 0 244 0;
#X connect 240 0 236 0;
#X connect 244 0 253 0;
#X connect 244 0 291 0;
#X connect 245 0 249 0;
#X connect 246 0 249 0;
#X connect 247 0 249 0;
#X connect 249 0 263 1;
#X connect 249 0 233 1;
#X connect 249 1 234 1;
#X connect 249 1 240 1;
#X connect 249 1 264 1;
#X connect 249 2 288 0;
#X connect 251 0 250 0;
#X connect 251 0 261 0;
#X connect 252 0 251 0;
#X connect 254 0 256 0;
#X connect 255 0 256 0;
#X connect 256 0 237 1;
#X connect 256 1 238 1;
#X connect 259 0 260 0;
#X connect 260 0 251 0;
#X connect 261 0 262 0;
#X connect 262 0 293 0;
#X connect 263 0 233 0;
#X connect 264 0 265 0;
#X connect 265 0 267 0;
#X connect 265 1 266 0;
#X connect 266 0 268 0;
#X connect 267 0 268 0;
#X connect 268 0 269 1;
#X connect 268 1 270 1;
#X connect 269 0 278 0;
#X connect 269 0 278 1;
#X connect 270 0 271 0;
#X connect 271 0 272 0;
#X connect 271 0 292 0;
#X connect 275 0 274 0;
#X connect 275 0 280 0;
#X connect 276 0 275 0;
#X connect 278 0 279 0;
#X connect 279 0 275 0;
#X connect 280 0 281 0;
#X connect 281 0 294 0;
#X connect 283 0 263 0;
#X connect 285 0 232 0;
#X connect 287 0 234 0;
#X connect 289 0 240 0;
#X connect 290 0 264 0;
#X connect 296 0 300 1;
#X connect 300 0 318 0;
#X connect 303 0 302 0;
#X connect 303 0 339 0;
#X connect 304 0 320 4;
#X connect 305 0 306 0;
#X connect 306 0 330 0;
#X connect 307 0 304 0;
#X connect 307 0 320 1;
#X connect 307 0 325 1;
#X connect 308 0 320 3;
#X connect 308 0 327 1;
#X connect 309 0 304 1;
#X connect 309 0 320 2;
#X connect 309 0 326 1;
#X connect 313 0 325 0;
#X connect 314 0 303 1;
#X connect 315 0 303 0;
#X connect 315 0 314 1;
#X connect 318 0 356 0;
#X connect 318 0 490 0;
#X connect 319 0 356 0;
#X connect 319 0 490 0;
#X connect 320 0 321 0;
#X connect 321 0 296 0;
#X connect 325 0 326 0;
#X connect 326 0 327 0;
#X connect 327 0 314 0;
#X connect 329 0 332 0;
#X connect 329 1 331 0;
#X connect 330 0 318 1;
#X connect 331 0 333 0;
#X connect 332 0 333 0;
#X connect 333 0 319 1;
#X connect 333 1 330 1;
#X connect 339 0 320 0;
#X connect 339 0 340 0;
#X connect 341 0 343 0;
#X connect 343 0 339 1;
#X connect 345 0 301 0;
#X connect 345 0 313 0;
#X connect 346 0 297 0;
#X connect 346 0 307 0;
#X connect 347 0 298 0;
#X connect 347 0 309 0;
#X connect 348 0 299 0;
#X connect 348 0 308 0;
#X connect 349 0 315 0;
#X connect 350 0 320 0;
#X connect 351 0 320 0;
#X connect 351 0 329 0;
#X connect 352 0 300 0;
#X connect 352 0 319 0;
#X connect 354 0 187 0;
#X connect 354 0 100 1;
#X connect 355 0 342 0;
#X connect 355 0 319 1;
#X connect 357 0 305 0;
#X connect 357 0 319 1;
#X connect 358 0 362 1;
#X connect 362 0 380 0;
#X connect 365 0 364 0;
#X connect 365 0 401 0;
#X connect 366 0 382 4;
#X connect 367 0 368 0;
#X connect 368 0 392 0;
#X connect 369 0 366 0;
#X connect 369 0 382 1;
#X connect 369 0 387 1;
#X connect 370 0 382 3;
#X connect 370 0 389 1;
#X connect 371 0 366 1;
#X connect 371 0 382 2;
#X connect 371 0 388 1;
#X connect 375 0 387 0;
#X connect 376 0 365 1;
#X connect 377 0 365 0;
#X connect 377 0 376 1;
#X connect 380 0 421 0;
#X connect 380 0 491 0;
#X connect 381 0 421 0;
#X connect 381 0 491 0;
#X connect 382 0 383 0;
#X connect 383 0 358 0;
#X connect 387 0 388 0;
#X connect 388 0 389 0;
#X connect 389 0 376 0;
#X connect 391 0 394 0;
#X connect 391 1 393 0;
#X connect 392 0 380 1;
#X connect 393 0 395 0;
#X connect 394 0 395 0;
#X connect 395 0 381 1;
#X connect 395 1 392 1;
#X connect 401 0 382 0;
#X connect 401 0 402 0;
#X connect 404 0 401 1;
#X connect 407 0 363 0;
#X connect 407 0 375 0;
#X connect 408 0 359 0;
#X connect 408 0 369 0;
#X connect 409 0 360 0;
#X connect 409 0 371 0;
#X connect 410 0 361 0;
#X connect 410 0 370 0;
#X connect 411 0 377 0;
#X connect 413 0 382 0;
#X connect 414 0 404 0;
#X connect 415 0 416 0;
#X connect 417 0 382 0;
#X connect 417 0 391 0;
#X connect 418 0 362 0;
#X connect 418 0 381 0;
#X connect 420 0 403 0;
#X connect 420 0 381 1;
#X connect 422 0 367 0;
#X connect 422 0 381 1;
#X connect 423 0 427 1;
#X connect 427 0 445 0;
#X connect 430 0 429 0;
#X connect 430 0 466 0;
#X connect 431 0 447 4;
#X connect 432 0 433 0;
#X connect 433 0 457 0;
#X connect 434 0 431 0;
#X connect 434 0 447 1;
#X connect 434 0 452 1;
#X connect 435 0 447 3;
#X connect 435 0 454 1;
#X connect 436 0 431 1;
#X connect 436 0 447 2;
#X connect 436 0 453 1;
#X connect 440 0 452 0;
#X connect 441 0 430 1;
#X connect 442 0 430 0;
#X connect 442 0 441 1;
#X connect 445 0 484 0;
#X connect 445 0 492 0;
#X connect 446 0 484 0;
#X connect 446 0 492 0;
#X connect 447 0 448 0;
#X connect 448 0 423 0;
#X connect 452 0 453 0;
#X connect 453 0 454 0;
#X connect 454 0 441 0;
#X connect 456 0 459 0;
#X connect 456 1 458 0;
#X connect 457 0 445 1;
#X connect 458 0 460 0;
#X connect 459 0 460 0;
#X connect 460 0 446 1;
#X connect 460 1 457 1;
#X connect 466 0 447 0;
#X connect 466 0 467 0;
#X connect 469 0 466 1;
#X connect 471 0 469 0;
#X connect 474 0 428 0;
#X connect 474 0 440 0;
#X connect 475 0 424 0;
#X connect 475 0 434 0;
#X connect 476 0 425 0;
#X connect 476 0 436 0;
#X connect 477 0 426 0;
#X connect 477 0 435 0;
#X connect 478 0 442 0;
#X connect 479 0 447 0;
#X connect 480 0 447 0;
#X connect 480 0 456 0;
#X connect 481 0 432 0;
#X connect 481 0 446 1;
#X connect 482 0 427 0;
#X connect 482 0 446 0;
#X connect 483 0 468 0;
#X connect 483 0 446 1;
#X connect 485 0 134 0;
#X connect 486 0 134 0;
#X connect 487 0 233 0;
#X connect 488 0 233 0;
#X coords 0 -1 1 1 430 320 2 100 100;
